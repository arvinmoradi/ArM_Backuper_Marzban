# ArM Backuper Marzban

<strong>یک اسکریپت ساده برای پشتیبان گیری و بازگردانی پنل مرزبان</strong>

## ویژگی‌ها

- **تهیه نسخه پشتیبان:** استفاده از روش‌های مختلف فشرده‌سازی برای بکاپ گرفتن
- **ربات تلگرام:** امکان ارسال فایل بکاپ گرفته شده به ربات تلگرامی
- **زمانبندی ارسال بکاپ:** با تعیین زمانبندی مدنظر ، از پنل بکاپ گرفته و به ربات ثبت شده ارسال میشه
- **انتخاب روش فشرده سازی:** دو روش فشرده سازی gzip و xz گنجانده شده که امکان انتخاب بین آن‌ها وجود دارد
- **ویرایش اطلاعات:** بعد از نصب اسکریپت امکان ویرایش تمام اطلاعات وجود دارد
-  **نوع دیتابیس:** فرقی نمیکنه دیتابیس MySQL باشه یا SQLite ، عملیات Backup و Restore به یک روش انجام میشه. تشخیص نوع دیتابیس و عملیات مربوط به آن به صورت خودکار انجام میشه
-  **تغییر دیتابیس به صورت خودکار از SQLite به MySQL** : (تکمیل نشده)

## تفاوت بین gzip و xz: 

- فشرده سازی gzip کمتر است و منابع کمتری مصرف می کند.
- فشرده سازی xz بیشتر است و منابع بیشتری مصرف می کند.

## پیش‌نیازها
```bash
sudo apt update
sudo apt install toilet -y
sudo apt install figlet -y
sudo apt install toilet-fonts
sudo apt install pv
sudo apt install docker-compose -y
```
## نصب

برای نصب ArM Backuper Marzban، از دستور زیر استفاده کنید:

```bash
bash <(curl -s https://raw.githubusercontent.com/arvinmoradi/ArM_Backuper_Marzban/main/install.sh)
```
## فراخوانی
بعد از نصب اسکریپت ، برای فراخوانی از دستور زیر استفاده کنید :
```bas
arm_bm
```


## بازگردانی (Restore)

- برای انجام عملیات Restore باید از یک برنامه دیگراستفاده شود که بتوانیم فایل بکاپ را به سرور آپلود کنیم (برنامه پیشنهادی WinSCP می‌باشد).
- فایل‌های بکاپ را در مسیر /root/ قرار می دهیم و در اسکریپت گزینه Restore را انتخاب می‌کنیم . اسکریپت به صورت خودکار عملیات بازگردانی را انجام خواهد داد.
- اگر دیتابیس پنل زمان آخرین بکاپ MySQL بوده ، باید اول دیتابیس را به MySQL تغییر دهید و بعد عملیات Restore را انجام دهید (در بروزرسانی های بعدی تغییر دیتابیس به صورت خودکار اضافه خواهد شد)
- اگر حجم دیتابیس بیشتر از 50 مگابایت باشد، فایل بکاپ به قسمت‌های 49 مگابایتی تقسیم خواهند شد و برای بازیابی، تمام فایل‌ها را به همان مسیر /root/ آپلود کنید و گزینه Restore را انتخاب کنید.


## آموزش ویدویی

[فیلم آموزشی ArM Backuper Marzban](https://www.youtube.com/watch?v=Il9wEefPOA4)


## مشکل ، انتقاد و پیشنهاد 
https://t.me/ArvinMoradi
